<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=yes" />
  
  <!-- Preconnect para optimización -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com">
  
  <title>Eduardo Kanzansio - Digital Trafficker & Desarrollador Web en Mérida | Marketing Digital</title>
  <meta name="keywords" content="digital trafficker, kanzansio, eduardo antonio rosado can, marketing digital mérida, desarrollo web yucatán, seo mérida, community manager, producción audiovisual" />
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/kanzansio/RepositorioDeUtilidades@88e72e9c0407ecb9dabba8d7aac98f39609eb1b3/Kanzansio%20Logo-01.svg" type="image/svg+xml" />
  <meta name="author" content="Eduardo Antonio Rosado Can - Kanzansio" />
  <meta name="description" content="Eduardo Kanzansio: Digital Trafficker con +10 años de experiencia. Desarrollo web, SEO, producción audiovisual para influencers. Experto en automatización y marketing digital en Mérida." />
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#031E11" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Kanzansio Digital">
  <link rel="manifest" href="/manifest.json">
  
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Eduardo Kanzansio - Digital Trafficker & Desarrollador Web" />
  <meta property="og:description" content="Más de 10 años creando soluciones digitales. Desde páginas web hasta producción para influencers como Mr Bubus. Tu mejor opción en marketing digital." />
  <meta property="og:url" content="https://kanzansio.digital" />
  <meta property="og:image" content="https://cdn.jsdelivr.net/gh/kanzansio/RepositorioDeUtilidades@88e72e9c0407ecb9dabba8d7aac98f39609eb1b3/Kanzansio%20transparente.gif" />
  <meta property="og:locale" content="es_MX" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Eduardo Kanzansio - Digital Trafficker" />
  <meta name="twitter:description" content="Tu mejor opción en marketing digital. Experiencia desde los 14 años en el mundo digital." />
  <meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/kanzansio/RepositorioDeUtilidades@88e72e9c0407ecb9dabba8d7aac98f39609eb1b3/Kanzansio%20transparente.gif" />
  
  <!-- SEO Enhanced -->
  <link rel="canonical" href="https://kanzansio.digital" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <link rel="alternate" hreflang="es-MX" href="https://kanzansio.digital" />
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
  
  <!-- Geo Tags -->
  <meta name="geo.region" content="MX-YUC">
  <meta name="geo.placename" content="Mérida">
  <meta name="geo.position" content="20.9673;-89.5925">
  <meta name="ICBM" content="20.9673, -89.5925">
  
  <!-- Security -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' https://cdn.jsdelivr.net data:; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdn.ampproject.org;">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Eduardo Antonio Rosado Can",
    "alternateName": "Kanzansio",
    "url": "https://kanzansio.digital",
    "image": "https://cdn.jsdelivr.net/gh/kanzansio/RepositorioDeUtilidades@88e72e9c0407ecb9dabba8d7aac98f39609eb1b3/Kanzansio%20transparente.gif",
    "sameAs": ["https://www.linkedin.com/in/eduardo-antonio-rosado-can", "https://www.facebook.com/kanzansiodigital", "https://www.tiktok.com/@kanzansio"],
    "jobTitle": "Digital Trafficker & Web Developer",
    "worksFor": { "@type": "Organization", "name": "Kanzansio Digital" },
    "address": { "@type": "PostalAddress", "addressLocality": "Mérida", "addressRegion": "Yucatán", "addressCountry": "MX" },
    "description": "Digital Trafficker con más de 10 años de experiencia, especialista en desarrollo web, SEO, automatización y producción audiovisual."
  }
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Service",
    "serviceType": "Digital Marketing",
    "provider": {
      "@type": "Person",
      "name": "Eduardo Antonio Rosado Can",
      "alternateName": "Kanzansio"
    },
    "areaServed": {
      "@type": "City",
      "name": "Mérida, Yucatán"
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Servicios Digitales",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Desarrollo Web",
            "description": "Creación de sitios web optimizados para SEO y rendimiento"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "SEO y Marketing Digital",
            "description": "Posicionamiento web y estrategias de marketing digital"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Producción Audiovisual",
            "description": "Contenido para influencers y marcas digitales"
          }
        }
      ]
    }
  }
  </script>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5S3LMLHR');</script>

  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
  
  <style>
    :root {
      --font-console: 'VT323', monospace;
      --color-console: rgba(159, 255, 232, 0.9);
      --bg-console: #031E11;
      --bg-screen: #383838;
      --border-top: #020202;
      --border-sides: #080808;
      --border-bottom: #121212;
      --text-bg: #ffffff;
      --max-width: 90%;
      --spacing: 1.5rem;
      --border-radius: 2rem 0 0 2rem;
      --btn-primary: #00e63d;
      --btn-primary-hover: #00ff41;
    }
    
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      height: 100vh;
      font: 20px/1.2 var(--font-console);
      background: var(--bg-screen);
      color: var(--color-console);
      overflow: hidden;
    }
    
    ::selection, ::-moz-selection {
      background: var(--color-console);
      color: #031e11;
    }
    
    /* Reducción de movimiento para accesibilidad */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* Skip to content para accesibilidad */
    .skip-to-content {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--btn-primary);
      color: var(--bg-console);
      padding: 8px;
      text-decoration: none;
      z-index: 100000;
    }
    
    .skip-to-content:focus {
      top: 0;
    }
    
    .crt-overlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
    }
    
    .crt-overlay .framep {
      position: absolute;
      inset: 2%;
      border: 1rem solid;
      border-color: var(--border-top) var(--border-sides) var(--border-bottom) var(--border-sides);
      border-radius: var(--border-radius);
      box-shadow: inset 0 0 18rem #000, inset 0 0 3rem #000, 0 0 10rem #000;
      pointer-events: none;
      z-index: 4;
    }
    
    .crt-overlay .scanlines,
    .crt-overlay .glow {
      position: absolute;
      inset: 2%;
      border-radius: var(--border-radius);
      pointer-events: none;
    }
    
    .crt-overlay .scanlines {
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 50%, rgba(0, 0, 0, 0.1) 70%, rgba(0, 0, 0, 0.4) 100%);
      background-size: 100% .3rem;
      z-index: 3;
    }
    
    .crt-overlay .glow {
      opacity: .15;
      background: radial-gradient(circle at center, rgba(27, 212, 89, 1) 0%, rgba(27, 212, 89, .88) 58%, rgba(21, 235, 92, .57) 80%, rgba(19, 94, 29, .27) 93%, rgba(10, 23, 12, 0) 100%);
      animation: crt-glow 60s infinite;
      z-index: 2;
    }
    
    @keyframes crt-glow {
      0%, 100% { opacity: .1; }
      50% { opacity: .2; }
    }
    
    .crt-overlay .output {
      position: absolute;
      inset: 2%;
      padding: 1rem;
      background: var(--bg-console);
      border-radius: var(--border-radius);
      overflow-y: auto;
      overflow-x: hidden;
      z-index: 1;
      text-align: center;
    }

    .scroll-mask-top {
      position: sticky;
      top: -1rem;
      left: 0;
      width: 100%;
      height: 3rem;
      z-index: 101;
      background: linear-gradient(to bottom, var(--bg-console) 60%, transparent);
      pointer-events: none;
    }

    .header-container {
      max-width: 90%;
      margin: 0 auto;
      position: relative;
      z-index: 102;
      text-align: center;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 1rem 0;
    }
    
    .header-container.compact {
      position: fixed !important;
      top: 5% !important;
      left: 5% !important;
      right: 5% !important;
      max-width: 90% !important;
      margin: 0 auto !important;
      z-index: 102 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: space-between !important;
      padding: 0.5rem !important;
      background: var(--bg-console) !important;
      border-bottom: 2px solid var(--color-console) !important;
    }
    
    .header-container.compact h1 {
      font-size: 1.5rem;
      margin: 0 0 0 1rem;
    }
    
    .header-container.compact .glitch-wrapper {
      width: 40px;
      height: 40px;
      margin: 0;
    }
    
    .logo-title-wrapper {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-grow: 1;
    }
    
    .nav-menu {
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    
    .nav-menu .btn-terminal {
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
    }
    
    .glitch-wrapper {
      width: 25vh;
      height: 25vh;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
      transition: all 0.6s ease;
    }
    
    .glitch {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .progress-indicator {
      position: fixed;
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(3, 30, 17, 0.9);
      padding: 0.5rem 1rem;
      border: 1px solid var(--color-console);
      border-radius: 0.5rem;
      font-size: 0.9rem;
      z-index: 103;
      display: none;
    }
    
    .progress-indicator.visible {
      display: block;
    }

    main#terminal-content {
      transition: padding-top 0.5s ease;
    }
    
    h1, h2, h3 {
      margin-bottom: var(--spacing);
    }
    
    h1 {
      font-size: clamp(20px, 4vw, 26px);
    }
    
    h2 {
      font-size: clamp(22px, 4.5vw, 28px);
    }
    
    h3 {
      font-size: clamp(20px, 4vw, 26px);
    }
    
    p {
      margin-bottom: 1rem;
      text-align: left;
      font-size: 18px;
      line-height: 1.4;
      max-width: var(--max-width);
      margin-left: auto;
      margin-right: auto;
      color: var(--text-bg);
      opacity: 0;
      position: relative;
    }
    
    p.visible {
      opacity: 1;
    }
    
    #intro-preview {
      padding: 1rem 0;
      min-height: 10vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    .sequential-section {
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }
    
    .sequential-section.visible {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .btn-container {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
      margin: 1.5rem 0;
    }
    
    .btn-terminal {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background: transparent;
      color: var(--btn-primary);
      border: 2px solid var(--btn-primary);
      font-family: var(--font-console);
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
    }
    
    .btn-terminal:focus {
      outline: 3px solid var(--btn-primary-hover);
      outline-offset: 2px;
    }
    
    .btn-terminal::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--btn-primary);
      transition: left 0.3s;
      z-index: -1;
    }
    
    .btn-terminal:hover::before {
      left: 0;
    }
    
    .btn-terminal:hover {
      color: var(--bg-console);
      border-color: var(--btn-primary-hover);
    }
    
    .btn-terminal.read-more {
      font-size: 1.1rem;
      padding: 0.7rem 1.5rem;
      border-width: 3px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 230, 61, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(0, 230, 61, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 230, 61, 0); }
    }
    
    .intro-prompt-container {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: opacity 0.3s ease;
    }
    
    .intro-prompt-container .cursor {
      position: relative;
      animation: blink 1s infinite;
      display: inline-block;
      width: 10px;
      height: 24px;
      background: var(--color-console);
      vertical-align: middle;
    }

    #static-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: black;
      z-index: 10000;
      opacity: 1;
      transition: opacity 1s ease-out;
      pointer-events: none;
    }
    
    #static-overlay canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    
    #app {
      opacity: 0;
      transition: opacity 1s ease-out;
    }
    
    .cursor.typing {
      display: inline-block;
      width: 10px;
      height: 20px;
      background: var(--color-console);
      animation: blink 1s infinite;
      vertical-align: text-bottom;
    }
    
    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }

    #reset-btn {
      width: 30px;
      height: 30px;
      padding: 0;
      border: 2px solid var(--btn-primary);
      background: transparent;
      color: var(--btn-primary);
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    #reset-btn:focus {
      outline: 3px solid var(--btn-primary-hover);
      outline-offset: 2px;
    }
    
    #reset-btn::before,
    #reset-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 2px;
      background-color: var(--btn-primary);
      transition: background-color 0.3s;
    }
    
    #reset-btn::before {
      transform: translate(-50%, -50%) rotate(45deg);
    }
    
    #reset-btn::after {
      transform: translate(-50%, -50%) rotate(-45deg);
    }
    
    #reset-btn:hover {
      background-color: var(--btn-primary);
    }
    
    #reset-btn:hover::before,
    #reset-btn:hover::after {
      background-color: var(--bg-console);
    }

    /* Mejoras para móvil */
    @media (max-width: 768px) {
      body {
        font-size: 18px;
      }
      
      p {
        font-size: 16px;
        padding: 0 1rem;
        line-height: 1.5;
      }
      
      .header-container.compact {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem !important;
      }
      
      .logo-title-wrapper {
        justify-content: center;
        width: 100%;
      }
      
      .nav-menu {
        width: 100%;
        margin-right: 0;
        justify-content: center;
        display: flex;
        flex-wrap: wrap;
      }
      
      .main-buttons-container {
        display: flex;
        flex-grow: 1;
        justify-content: center;
        gap: 0.5rem;
      }
      
      .nav-menu .btn-terminal {
        flex-grow: 1;
        text-align: center;
        font-size: 0.8rem;
        padding: 0.4rem;
      }
      
      .btn-container {
        flex-direction: row;
        align-items: center;
      }
      
      .btn-terminal {
        width: auto;
        text-align: center;
      }
      
      .glitch-wrapper {
        width: 20vh;
        height: 20vh;
      }
      
      #reset-btn {
        order: -1;
        margin-right: auto;
        flex-grow: 0;
        width: 35px;
        height: 35px;
      }
    }
    
    /* Mejoras para PC */
    @media (min-width: 992px) {
      p {
        font-size: 22px;
      }
    }

    /* Instalación PWA */
    .install-prompt {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--bg-console);
      border: 2px solid var(--btn-primary);
      padding: 1rem;
      border-radius: 0.5rem;
      max-width: 300px;
      z-index: 1000;
      display: none;
    }
    
    .install-prompt.visible {
      display: block;
      animation: slideIn 0.5s ease;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
      }
      to {
        transform: translateX(0);
      }
    }
  </style>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5S3LMLHR"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  <!-- Skip to content link -->
  <a href="#terminal-content" class="skip-to-content">Saltar al contenido principal</a>
  
  <div id="app">
    <section class="screen">
      <div class="content">
        <div class="crt-overlay" aria-hidden="true">
          <div class="framep"></div>
          <div class="scanlines"></div>
          <div class="glow"></div>
          <div class="output" id="output-container">
            <div class="scroll-mask-top" aria-hidden="true"></div>
            <header class="header-container" id="header" role="banner">
              <h1>Kanzansio Digital Trafficker</h1>
              <div class="glitch-wrapper">
                <img src="https://cdn.jsdelivr.net/gh/kanzansio/RepositorioDeUtilidades@88e72e9c0407ecb9dabba8d7aac98f39609eb1b3/Kanzansio%20transparente.gif" 
                     alt="Kanzansio Logo - Digital Trafficker" 
                     class="glitch"
                     loading="lazy"
                     width="250"
                     height="250" />
              </div>
              <nav class="btn-container" id="main-buttons" role="navigation" aria-label="Navegación principal">
                <a href="https://wa.me/529994753666?text=Hola%20Eduardo,%20vi%20tu%20página%20web%20y%20me%20interesa%20hablar%20sobre%20un%20proyecto" 
                   class="btn-terminal" 
                   aria-label="Contactar por WhatsApp"
                   target="_blank"
                   rel="noopener noreferrer">Contáctame</a>
                <a href="https://kanzansio.digital/proyectos-web" 
                   class="btn-terminal" 
                   aria-label="Ver proyectos web">Proyectos</a>
                <a href="https://kanzansio.digital/cv" 
                   class="btn-terminal" 
                   aria-label="Ver currículum">CV</a>
              </nav>
            </header>

            <main id="terminal-content" role="main" aria-label="Contenido principal">
              <div id="intro-preview">
                <div class="intro-prompt-container" id="intro-prompt-container">
                  <button class="btn-terminal read-more" 
                          id="read-more-btn"
                          aria-label="Leer más sobre Eduardo Kanzansio"
                          aria-expanded="false">Leer más</button>
                  <span class="cursor" id="cursor" aria-hidden="true"></span>
                </div>
              </div>

              <div id="full-content" aria-live="polite">
                <div class="sequential-section">
                  <section data-section="intro" aria-label="Introducción">
                    <p data-text="Hola, si estás leyendo esto, yo he dado mantenimiento o he creado esta web. Me presento: soy Eduardo Antonio Rosado Can, o solo dime Kanzansio. Soy un entusiasta de la programación con instrucción universitaria en Marketing y gestión empresarial. Sin embargo, mi otra escuela es ser autodidacta y buscar siempre soluciones."></p>
                    <p data-text="Tengo más de una década de experiencia en el sector, puesto que empecé incluso antes de que ser Community Manager fuera un trabajo (a mis 14 años en este mundillo de la red) y Google indexara el término de Digital Trafficker."></p>
                    <p data-text="Si buscas a alguien que sepa desde crear páginas web, hasta producción audiovisual para influencers como son Mr Bubus o Nación Pelaná, yo soy tu mejor opción."></p>
                  </section>
                </div>

                <div class="sequential-section">
                  <section data-section="mejor-opcion" aria-label="Por qué soy tu mejor opción">
                    <h2>¿Qué me hace tu mejor opción como Digital Trafficker?</h2>
                    <p data-text="• Experiencia temprana y continua: llevo más de diez años operando en el mundo digital, desde la creación técnica hasta el posicionamiento y tráfico. He hecho desde páginas, hasta diseño gráfico y una que otra cuenta de OnlyFans monetizada (que no son mías, yo solo ayudé)."></p>
                    <p data-text="• Conocimientos multidisciplinarios: desarrollo sitios web optimizados para SEO, rendimiento y accesibilidad; además produzco contenido audiovisual atractivo para influenciadores y marcas digitales."></p>
                    <p data-text="• Aprendizaje constante: tengo formación formal en marketing y gestión empresarial, pero mi verdadero motor es la curiosidad autodidacta, la experiencia real y la adaptación a nuevos retos y tecnologías."></p>
                  </section>
                </div>
                
                <div class="sequential-section">
                  <section data-section="seo-automatizacion" aria-label="SEO y automatización">
                    <h3>SEO dirigido y entusiasta de la automatización</h3>
                    <p data-text="• Mi tesis universitaria trataba de chat bots con múltiples respuestas antes de que la IA fuera famosa"></p>
                    <p data-text="• Entiendo el contenido desde la experiencia de un creador, no solo de un marketer"></p>
                    <p data-text="• Tantos conocimientos de diseño, programación y storytelling en una sola persona"></p>
                    <p data-text="• Esta página está creada con un plugin que yo, 2 Monsters y una IA ayudamos a desarrollar en una noche de insomnio. Imagina lo que puedo hacer por ti."></p>
                    </section>
                </div>
              </div>
              <span class="cursor typing" id="typing-cursor-placeholder" style="display: none;" aria-hidden="true"></span>
            </main>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Progress Indicator -->
  <div class="progress-indicator" id="progress-indicator" role="status" aria-live="polite">
    <span class="current">1</span> / <span class="total">3</span> secciones
  </div>

  <!-- PWA Install Prompt -->
  <div class="install-prompt" id="install-prompt" role="alert">
    <p>¡Instala esta app para acceso rápido!</p>
    <button class="btn-terminal" id="install-btn">Instalar</button>
  </div>

  <div id="static-overlay" aria-hidden="true">
    <canvas id="static-canvas"></canvas>
  </div>

  <script>
    // --- EFECTO DE ESTÁTICA AL CARGAR (OPTIMIZADO) ---
    window.addEventListener('load', () => {
      const overlay = document.getElementById('static-overlay');
      const canvas = document.getElementById('static-canvas');
      const ctx = canvas.getContext('2d');
      const app = document.getElementById('app');
      
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resize();
      
      // Debounce para resize
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(resize, 250);
      });
      
      // Reducir frecuencia a 20fps para mejor rendimiento
      const noiseInterval = setInterval(() => {
        const imgData = ctx.createImageData(canvas.width, canvas.height);
        const buf = new Uint32Array(imgData.data.buffer);
        for (let i = 0; i < buf.length; i++) {
          const v = Math.random() * 255 | 0;
          buf[i] = (255 << 24) | (v << 16) | (v << 8) | v;
        }
        ctx.putImageData(imgData, 0, 0);
      }, 50);
      
      setTimeout(() => {
        overlay.style.opacity = '0';
        app.style.opacity = '1';
      }, 1000);
      
      overlay.addEventListener('transitionend', () => {
        clearInterval(noiseInterval);
        overlay.remove();
      });
    });

    // --- CLASE PARA EFECTO DE ESCRITURA ---
    class TerminalEffect {
      constructor() {
        this.cursor = document.getElementById('typing-cursor-placeholder');
        this.isTyping = false;
        this.typingSpeed = 20;
      }
      
      async typeElement(element) {
        if (this.isTyping) return;
        this.isTyping = true;
        this.cursor.style.display = 'inline-block';
        element.style.opacity = '1';
        element.classList.add('visible');
        const text = element.getAttribute('data-text');
        element.textContent = '';
        element.appendChild(this.cursor);
        
        for (let i = 0; i < text.length; i++) {
          element.textContent = text.substring(0, i + 1);
          element.appendChild(this.cursor);
          await new Promise(resolve => setTimeout(resolve, this.typingSpeed));
        }
        
        this.cursor.style.display = 'none';
        element.parentNode.appendChild(this.cursor);
        this.isTyping = false;
      }
    }

    // --- SERVICE WORKER PARA PWA ---
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registrado'))
          .catch(err => console.log('Service Worker error:', err));
      });
    }

    // --- PWA INSTALL PROMPT ---
    let deferredPrompt;
    const installPrompt = document.getElementById('install-prompt');
    const installBtn = document.getElementById('install-btn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installPrompt.classList.add('visible');
    });

    if (installBtn) {
      installBtn.addEventListener('click', async () => {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          console.log(`User ${outcome} the install prompt`);
          deferredPrompt = null;
          installPrompt.classList.remove('visible');
        }
      });
    }

    // --- LÓGICA PRINCIPAL DE LA PÁGINA ---
    document.addEventListener('DOMContentLoaded', () => {
      const terminalEffect = new TerminalEffect();
      const readMoreBtn = document.getElementById('read-more-btn');
      const introPromptContainer = document.getElementById('intro-prompt-container');
      const sections = document.querySelectorAll('.sequential-section');
      const progressIndicator = document.getElementById('progress-indicator');
      const currentSpan = progressIndicator.querySelector('.current');
      const totalSpan = progressIndicator.querySelector('.total');
      let currentSectionIndex = 0;
      let isFirstClick = true;

      totalSpan.textContent = sections.length;

      // Soporte para teclado
      readMoreBtn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          readMoreBtn.click();
        }
      });

      readMoreBtn.addEventListener('click', async () => {
        if (isFirstClick) {
          setupCompactLayout();
          isFirstClick = false;
          progressIndicator.classList.add('visible');
        }

        if (currentSectionIndex < sections.length) {
          readMoreBtn.disabled = true;
          readMoreBtn.style.display = 'none';
          readMoreBtn.setAttribute('aria-expanded', 'true');
          document.getElementById('cursor').style.display = 'none';
          
          const sectionToReveal = sections[currentSectionIndex];
          sectionToReveal.classList.add('visible');
          const elementsToAnimate = sectionToReveal.querySelectorAll('[data-text], h2, h3');
          
          for (const element of elementsToAnimate) {
            if (element.hasAttribute('data-text')) {
              await terminalEffect.typeElement(element);
            } else {
              element.style.opacity = '1';
            }
          }
          
          currentSectionIndex++;
          currentSpan.textContent = currentSectionIndex;
          
          if (currentSectionIndex < sections.length) {
            readMoreBtn.style.display = 'inline-block';
            document.getElementById('cursor').style.display = 'inline-block';
            readMoreBtn.disabled = false;
            readMoreBtn.setAttribute('aria-expanded', 'false');
          } else {
            progressIndicator.classList.remove('visible');
            const finalContactButton = document.createElement('a');
            finalContactButton.href = "https://wa.me/529994753666?text=Hola%20Eduardo,%20quiero%20hablar%20sobre%20mi%20proyecto%20digital";
            finalContactButton.className = 'btn-terminal';
            finalContactButton.textContent = 'Hablemos de tu proyecto';
            finalContactButton.target = '_blank';
            finalContactButton.rel = 'noopener noreferrer';
            introPromptContainer.innerHTML = '';
            introPromptContainer.appendChild(finalContactButton);
            
            // Track completion
            if (typeof gtag !== 'undefined') {
              gtag('event', 'content_viewed', {
                'event_category': 'engagement',
                'event_label': 'completed_reading'
              });
            }
          }
        }
      });
    });

    // --- FUNCIÓN PARA CONFIGURAR EL MODO COMPACTO ---
    function setupCompactLayout() {
      const introPreview = document.getElementById('intro-preview');
      const introContainer = document.getElementById('intro-prompt-container');
      const header = document.getElementById('header');
      const mainButtons = document.getElementById('main-buttons');
      const title = header.querySelector('h1');
      const logo = header.querySelector('.glitch-wrapper');
      const terminalContent = document.getElementById('terminal-content');

      introPreview.style.display = 'none';
      header.classList.add('compact');
      
      const setPadding = () => {
        const headerHeight = header.offsetHeight;
        const isMobile = window.innerWidth <= 768;
        const maxPadding = isMobile ? 110 : 90;
        const paddingTop = Math.min(headerHeight + 10, maxPadding);
        terminalContent.style.paddingTop = `${paddingTop}px`;
      };
      setPadding();
      
      const logoTitleWrapper = document.createElement('div');
      logoTitleWrapper.className = 'logo-title-wrapper';
      logoTitleWrapper.appendChild(logo);
      logoTitleWrapper.appendChild(title);
      
      const navMenu = document.createElement('nav');
      navMenu.className = 'nav-menu';
      navMenu.setAttribute('role', 'navigation');
      navMenu.setAttribute('aria-label', 'Navegación compacta');
      
      const resetButton = document.createElement('button');
      resetButton.id = 'reset-btn';
      resetButton.setAttribute('aria-label', 'Reiniciar página');
      resetButton.onclick = () => location.reload();
      
      const mainButtonsContainer = document.createElement('div');
      mainButtonsContainer.className = 'main-buttons-container';
      mainButtonsContainer.appendChild(mainButtons);

      navMenu.appendChild(mainButtonsContainer);
      navMenu.appendChild(resetButton);
      
      header.innerHTML = '';
      header.appendChild(logoTitleWrapper);
      header.appendChild(navMenu);

      const outputContainer = document.getElementById('terminal-content');
      outputContainer.appendChild(introContainer);
      introContainer.style.display = 'inline-flex';

      // Debounce para resize
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(setPadding, 250);
      });
    }

    // --- TRACKING DE EVENTOS ---
    document.addEventListener('DOMContentLoaded', () => {
      // Track clicks en botones principales
      document.querySelectorAll('.btn-terminal').forEach(btn => {
        btn.addEventListener('click', (e) => {
          if (typeof gtag !== 'undefined') {
            gtag('event', 'click', {
              'event_category': 'navigation',
              'event_label': btn.textContent
            });
          }
        });
      });
    });
  </script>
</body>
</html>